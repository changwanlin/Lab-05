# Lab-05 資料庫正規化設計
## Lab-05_1：圖書館資料庫設計
1. 識別問題與函數相依性：
* 分析上述初步收集的資料，找出潛在的資料重複、插入異常、更新異常和刪除異常。
(1)資料重複:同一本書被借閱，就會重複出現書籍的資料。
(2)插入異常:無法新增還未被借閱的書籍資料。
(3)刪除異常:刪除某一筆借閱紀錄可能會導致書籍或會員資訊遺失。
(4)更新異常:會員聯絡資訊變更會需要更新多筆紀錄。

* 列出所有合理的函數相依性。
`ISBN` -> `書名`, `出版社名稱`, `出版社地址`, `出版年份`, `書籍類別`
`ISBN`, `作者` -> `書籍作者配對`
`會員卡號` -> `會員姓名`, `會員地址`, `會員電話`, `會員Email`
`借閱ID` -> `會員卡號`, `ISBN`, `借閱日期`, `應還日期`, `實際歸還日期`
`會員卡號`, `ISBN`, `借閱日期` -> `應還日期`, `實際歸還日期`

---

2. 正規化設計：
* 將資料庫綱要 (Schema) 正規化至第三正規化 (3NF)。如果可以，嘗試達到 BCNF。
(1) 1NF

    * 消除群組欄位與多值欄位 → 將多位作者轉為單一欄位，並設計「書籍－作者」對照表

    (2) 2NF

    * 拆出：書籍表、會員表、出版社表、借閱表、作者表、書籍作者關聯表

    * 確保所有非主鍵欄位完全依賴主鍵

    (3) 3NF / BCNF

    * 出版社名稱與地址形成傳遞相依，故設立出版社表，達成 3NF

    * 所有決定因素皆為候選鍵，符合 BCNF


* ERD圖：
![lab05_1.drawio](https://hackmd.io/_uploads/rkrUyAtZxg.png)


---

3. 分析與說明：
* 書籍與作者為多對多關係，需建立關聯表 BookAuthor

* 出版社資訊與書籍為一對多關係，避免重複儲存

* 借閱紀錄包含複合鍵，為簡化與符合實務應用，設置流水號 BorrowID

* 設計已符合 BCNF，無任何非候選鍵作為決定因素